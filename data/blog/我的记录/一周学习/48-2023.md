---
title: 2023-第四十八周
date: '2023-12-04'
tags: ['WEEKLY-2023']
draft: false
summary: ''
---

`该周报主要为各个地方内容的汇总整理`

- [技术](#技术)
  - [四层负载均衡漫谈](#四层负载均衡漫谈)
  - [GLB: GitHub’s open source load balancer](#glb-githubs-open-source-load-balancer)
- [工具](#工具)
- [更新](#更新)
  - [XState v5 is here](#xstate-v5-is-here)
- [设计](#设计)
- [AI](#ai)
- [其他](#其他)

## 技术

### [四层负载均衡漫谈](https://www.kawabangga.com/posts/5301)

四层负载均衡是一种在网络中常见的技术，通常作为 TCP 层的反向代理使用。它根据 TCP 头部中的端口和标志位来转发数据，而不维护完整的 TCP 实现。这种负载均衡更像是转发 IP 包而不是 TCP 代理。这种设计使得四层负载均衡具有高效的转发效率。除了这些基本概念，还介绍了依赖服务发现的客户端侧负载均衡和反向代理模式的负载均衡技术。在后者中，将负载均衡器放在后端实例前面，通过将流量均衡地转发给后端实例来实现扩缩容。然而，负载均衡器本身也需要解决自身的扩缩容和服务发现问题。

- 四层负载均衡是 TCP 层的反向代理，根据 TCP 头部的端口和标志位来转发数据，而不维护完整的 TCP 实现。
- 四层负载均衡更像是转发 IP 包而不是 TCP 代理，转发效率高。
- 依赖服务发现的客户端侧负载均衡是让客户端知道存在多个服务器，并根据一定策略访问不同的服务器。
- 反向代理模式的负载均衡通过在后端实例前面放置负载均衡器来实现扩缩容，将流量均衡地转发给后端实例。
- 负载均衡器本身需要解决自身的扩缩容和服务发现问题。

### [GLB: GitHub’s open source load balancer](https://github.blog/2018-08-08-glb-director-open-source-load-balancer/)

GitHub 发布了他们的负载均衡器 GLB Director 的设计细节，并将其开源。GLB Director 是一个第四层负载均衡器，可以将一个 IP 地址分散到多个物理机器上，同时尽量减少服务器变化时连接的中断。它不取代 haproxy 和 nginx 等服务，而是在这些服务（或任何 TCP 服务）之前添加了一层，使它们能够在多个物理机器上扩展而不需要每个机器都有唯一的 IP 地址。GLB Director 利用 ECMP（Equal-Cost Multi-Path）路由实现 IP 地址的扩展，通过哈希算法将连接均衡地分配到多个路径上。为了解决连接断裂的问题，GLB Director 引入了一个新的层级“director”，负责控制哈希和存储与连接相关的状态。GLB Director 通过利用代理服务器已有的流状态，避免了在 director 层级中重复存储连接状态的问题。为了保持一致性，GLB Director 使用“rendezvous hashing”来选择主服务器和备用服务器，并通过调整服务器状态来添加和删除服务器。

- GitHub 发布了他们的负载均衡器 GLB Director 的设计细节，并将其作为开源项目发布。
- GLB Director 是一个 Layer 4 负载均衡器，可以将单个 IP 地址分布在多个物理机器上，以实现负载均衡，同时尽量减少连接中断。
- GLB Director 通过使用 ECMP 路由和流状态改进了传统负载均衡器的设计，使得代理服务器可以在无状态的情况下进行添加和删除，并保持连接的稳定。


## 工具

## 更新

### [XState v5 is here](https://stately.ai/blog/2023-12-01-xstate-v5)

XState v5 是一个基于状态机、状态图和 Actor 模型的开源状态管理和编排解决方案。它主要关注于演员（actors）的使用，使开发者能够更轻松地编写和管理复杂的应用逻辑。在这个版本中，XState 引入了演员作为抽象单位，可以用来创建各种类型的逻辑，如 Promise 逻辑、Transition 函数逻辑、Observable 逻辑和 Callback 逻辑。同时，XState v5 还引入了新的特性，如 Inspect API、深度持久化和演员系统等。这个版本还对 API 进行了简化，减小了打包大小，并进行了文档改进和添加了新的示例。

- XState v5 是一个基于状态机、状态图和演员模型的开源状态管理和编排解决方案，旨在简化逻辑管理和协同开发。
- XState v5 的主要关注点是演员，它们可以模拟系统中多个部分之间的通信和协作。
- XState v5 引入了新的演员逻辑创建器，并通过创建演员来实现不同类型的逻辑，如 Promise、过渡函数、Observable 和 Callback。

## 设计

## AI

## 其他

